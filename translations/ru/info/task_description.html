<div class="story">
    <p>
        По рзелульаттам илссеовадний одонго анлигйсокго унвиертисета, не иеемт 
        занчнеия, в кокам пряокде рсапожолены бкувы в солве. Галвоне, чотбы 
        преавя и пслоендяя бквуы блыи на мсете. Осатьлыне бкувы мгоут селдовтаь 
        в плоонм бсепордяке, все-рвано ткест чтаитсея без побрелм. 
        Пичрионй эгото ялвятеся то, что мы не чиатем кдаужю бкуву по 
        отдльенотси, а все солво цликеом. .<br>
        -- Неизвестный автор.
    </p>

    <p>
        "Ennyn Durin Aran Moria. Pedo mellon a Minno. Im Narvi hain echant. Celebrimbor o Eregion
        tethant. I thiwhin"<br>
        "Врата Дарина, Лорда Мории. Скажи "друг" и войди. Я, Нарви, сделал их. 
        Келебримбор из Эрегиона начертал эти знаки<br>
        -- "Братство кольца" Д. Р. Толкиен
    </p>
</div>

<p>
    Врата Дарина были открыты Гэндальфом и Братство вошло в
    <a href="http://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D1%80%D0%B8%D1%8F">Морию</a>.
    Как они выяснили, это подземное королевство имело врата у каждого входа. Каждые врата
    имели начертанную фразу, содержащую ключевое слово. 
    К счастью, Гимли знает, как распознать это слово. Это наиболее "похожее" слово,
    которое имеет наибольший средний  коэффициент "похожести" с другими словами в фразе.
</p>
<p>
    Дана фраза. Вам нужно выбрать все слова (буква или группа букв, которые имеют значение при произнесении или письме и обычно отображаются с пробелом или другим знаком препинания с обеих сторон при написании или печати),
    посчитать коэффициент "похожести" с другими словами, взять его среднее значение и выбрать 
    максимальное значение. Считайте коэффициент "похожести" даже для одинаковых слов (конечно он равен 100). 
    Если несколько слов имеют одинаковое значение, тогда выберите слово, расположенное ближе к концу фразы. 
    Слова во фразе могут быть разделены пробелами и пунктуацией. Цифр нет.
</p>
<p>
    Коэффициент похожести для двух слов измеряется в процентах по следующим правилам:<br>
    - Регистр не важен ("A" == "a");<br>

    - Если первые буквы слов одинаковые - добавьте 10%;<br>

    - Если последние буквы слов одинаковы - добавьте 10%;<br>

    - Добавьте сравнение длины <br>
    (length_of_word1&nbsp;/&nbsp;length_of_word2)&nbsp;*&nbsp;30%, если
    length_of_word1&nbsp;&le;&nbsp;length_of_word2;<br>, иначе
    (length_of_word2&nbsp;/&nbsp;length_of_word1)&nbsp;*&nbsp;30%<br>

    - Добавьте все уникальные буквы из обоих слов в одно множество и посчитайте их количество,
    также посчитатайте сколько букв встречается одновременно в обоих словах. 
    Добавьте к коэффициенту 
    (common_letter_number&nbsp;/&nbsp;unique_letters_numbers)&nbsp;*&nbsp;50;<br>
    <br>
    Таким образом максимальный коэффциент "похожести" равен 100%. Например: для слов "Bread" и "Beard".
</p>

<p>
    Результат нужно возвратить в нижнем регистре.
</p>
<p>
    Давайте рассмотрим пример. Фраза: "Friend Fred and friend Ted."
    Во-первых, выберем слова - ("friend", "fred", "and", "friend", "ted").
    Затем посчитаем "похожесть" первого слова и остальных.
    "friend" и "fred" имеют одинаковые первые и последние буквы, т.е. добавляем 20.
    Далее сравнение длины: длина "fred" меньше чем "friend", таким образом добавляем (4/6)*30=20.
    Последнее правило: для этих слов уникальными буквами являются "definr" и пересекающимися буквами
    являются "defr".
    Таким образом (4/6)*50&asymp;33.333. И в сумме - 73.333.<br>
    Таким же способом мы будем считать все другие коэффициенты и получим следующую таблицу
    (результаты округлены для простоты). Наибольшее среднее - 62.976 и результат - "friend".
</p>

<pre>
        | friend  | fred    | and     | friend  | ted     |
--------|---------|---------|---------|---------|---------|
friend  | ------  | 73.333  | 39.286  | 100.0   | 39.286  |
fred    | 73.333  | ------  | 40.833  | 73.333  | 52.5    |
and     | 39.286  | 40.833  | ------  | 39.286  | 50.0    |
friend  | 100.0   | 73.333  | 39.286  | ------  | 39.286  |
ted     | 39.286  | 52.5    | 50.0    | 39.286  | ------  |
--------|---------|---------|---------|---------|---------|
сумма   | 251.905 | 239.999 | 169.405 | 251.905 | 181.072 |
среднее | 62.976  | 60      | 42.351  | 62.976  | 45.268  |

</pre>
<p>
    <strong>Входные данные: </strong> Предложение как строка (unicode)
</p>

<p>
    <strong>Выходные данные: </strong> Слово как строка (str).
</p>


<div class="for_info_only">
    <p>
        <strong>Пример:</strong>
    </p>
    <pre class="brush: python">
find_word("Speak friend and enter.") == "friend"
    </pre>
</div>

<p class="for_info_only">
    <strong>Как это используется: </strong>
    Это готовый алгоритм который может быть модифицирован и использован для лингвистических исследований
    и распознования текстовых шаблонов.

</p>

<p>
    <strong>Предусловие:</strong><br>
    0 &lt; len(message)<br>
    all(x in (string.ascii_letters + string.punctuation + " ") for x in message)
</p>
